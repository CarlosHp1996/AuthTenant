=========================================================
UPDATEPRODUCTCOMMANDVALIDATOR.CS - DOCUMENTAÃ‡ÃƒO TÃ‰CNICA
=========================================================

VISÃƒO GERAL:
-----------
Validator enterprise para comandos de atualizaÃ§Ã£o de produtos com validaÃ§Ãµes abrangentes.
Implementa regras de negÃ³cio especÃ­ficas para modificaÃ§Ã£o de produtos em sistemas multi-tenant.
Inclui validaÃ§Ãµes adicionais para mudanÃ§as drÃ¡sticas e integridade referencial.

LOCALIZAÃ‡ÃƒO:
-----------
ğŸ“ AuthTenant.Application/Validators/Product/UpdateProductCommandValidator.cs

DEPENDÃŠNCIAS:
------------
âœ… FluentValidation - Framework de validaÃ§Ã£o
âœ… AuthTenant.Application.Commands.Product.UpdateProductCommand - Comando de atualizaÃ§Ã£o
âœ… System.Text.RegularExpressions - ValidaÃ§Ãµes regex
âœ… System.Globalization - FormataÃ§Ã£o de dados

RESPONSABILIDADES:
-----------------
ğŸ”¸ ValidaÃ§Ã£o de ID do produto existente
ğŸ”¸ ValidaÃ§Ã£o robusta de dados atualizados
ğŸ”¸ VerificaÃ§Ã£o de mudanÃ§as drÃ¡sticas
ğŸ”¸ Controle de qualidade de modificaÃ§Ãµes
ğŸ”¸ PrevenÃ§Ã£o de corrupÃ§Ã£o de dados
ğŸ”¸ AplicaÃ§Ã£o de regras de negÃ³cio para atualizaÃ§Ãµes

VALIDAÃ‡Ã•ES IMPLEMENTADAS:
------------------------

1. ID DO PRODUTO:
   âœ… ObrigatÃ³rio e nÃ£o pode ser vazio
   âœ… Deve ser um GUID vÃ¡lido
   âœ… NÃ£o pode ser GUID vazio (00000000-0000-0000-0000-000000000000)
   âœ… VerificaÃ§Ã£o de integridade do identificador

2. NOME DO PRODUTO:
   âœ… ObrigatÃ³rio e nÃ£o nulo
   âœ… Comprimento entre 2 e 200 caracteres
   âœ… Caracteres permitidos (letras, nÃºmeros, sÃ­mbolos comerciais)
   âœ… NÃ£o pode conter apenas espaÃ§os em branco
   âœ… NÃ£o pode conter espaÃ§os excessivos
   âœ… NÃ£o deve conter palavras repetidas
   âœ… Deve ser descritivo e profissional
   âœ… VerificaÃ§Ã£o contra nomes proibidos (teste, dummy, etc.)

3. DESCRIÃ‡ÃƒO:
   âœ… Opcional, mas se fornecida, mÃ¡ximo 2000 caracteres
   âœ… NÃ£o pode conter apenas espaÃ§os em branco
   âœ… VerificaÃ§Ã£o contra conteÃºdo perigoso (XSS)
   âœ… Deve ser informativa e profissional
   âœ… DetecÃ§Ã£o de conteÃºdo repetitivo/spam

4. PREÃ‡O:
   âœ… ObrigatÃ³rio e maior que zero
   âœ… Valor entre R$ 0,01 e R$ 999.999,99
   âœ… MÃ¡ximo 2 casas decimais
   âœ… VerificaÃ§Ã£o contra valores extremos suspeitos
   âœ… ValidaÃ§Ã£o de mudanÃ§as drÃ¡sticas de preÃ§o
   âœ… DetecÃ§Ã£o de alteraÃ§Ãµes nÃ£o razoÃ¡veis

5. SKU (Stock Keeping Unit):
   âœ… Opcional, mas se fornecido, entre 3 e 50 caracteres
   âœ… Apenas letras maiÃºsculas, nÃºmeros, hÃ­fens e underscores
   âœ… NÃ£o pode conter caracteres especiais consecutivos
   âœ… NÃ£o pode comeÃ§ar ou terminar com caracteres especiais
   âœ… Deve seguir formatos vÃ¡lidos (PROD-2024-001, ABC123, etc.)
   âœ… VerificaÃ§Ã£o de padrÃµes profissionais

6. QUANTIDADE EM ESTOQUE:
   âœ… ObrigatÃ³rio e nÃ£o pode ser negativo
   âœ… MÃ¡ximo de 1.000.000 unidades
   âœ… VerificaÃ§Ã£o de valores razoÃ¡veis para atualizaÃ§Ãµes
   âœ… DetecÃ§Ã£o de mudanÃ§as drÃ¡sticas de estoque
   âœ… ValidaÃ§Ã£o de alteraÃ§Ãµes suspeitas

CONSTANTES DE VALIDAÃ‡ÃƒO:
-----------------------
ğŸ“Š MIN_NAME_LENGTH = 2 caracteres
ğŸ“Š MAX_NAME_LENGTH = 200 caracteres
ğŸ“Š MAX_DESCRIPTION_LENGTH = 2000 caracteres
ğŸ“Š MIN_SKU_LENGTH = 3 caracteres
ğŸ“Š MAX_SKU_LENGTH = 50 caracteres
ğŸ“Š MIN_PRICE = R$ 0,01
ğŸ“Š MAX_PRICE = R$ 999.999,99
ğŸ“Š MAX_STOCK_QUANTITY = 1.000.000 unidades

PADRÃ•ES REGEX:
--------------
ğŸ“Š SKU_PATTERN = ^[A-Z0-9\-_]+$
ğŸ“Š PRODUCT_NAME_PATTERN = ^[a-zA-ZÃ€-Ã¿0-9\s\-\.\/\(\)\&\'\+]+$

CÃ“DIGOS DE ERRO PERSONALIZADOS:
------------------------------
âŒ PRODUCT_ID_REQUIRED - ID obrigatÃ³rio
âŒ PRODUCT_ID_INVALID - ID invÃ¡lido
âŒ PRODUCT_NAME_REQUIRED - Nome obrigatÃ³rio
âŒ PRODUCT_NAME_NULL - Nome nÃ£o pode ser nulo
âŒ PRODUCT_NAME_LENGTH - Comprimento de nome invÃ¡lido
âŒ PRODUCT_NAME_FORMAT - Formato de nome invÃ¡lido
âŒ PRODUCT_NAME_WHITESPACE - Apenas espaÃ§os detectados
âŒ PRODUCT_NAME_EXCESSIVE_WHITESPACE - EspaÃ§os excessivos
âŒ PRODUCT_NAME_REPEATED_WORDS - Palavras repetidas
âŒ PRODUCT_NAME_INVALID - Nome nÃ£o profissional
âŒ PRODUCT_DESCRIPTION_LENGTH - DescriÃ§Ã£o muito longa
âŒ PRODUCT_DESCRIPTION_WHITESPACE - DescriÃ§Ã£o apenas espaÃ§os
âŒ PRODUCT_DESCRIPTION_DANGEROUS - ConteÃºdo perigoso detectado
âŒ PRODUCT_DESCRIPTION_INVALID - DescriÃ§Ã£o nÃ£o informativa
âŒ PRODUCT_PRICE_POSITIVE - PreÃ§o deve ser positivo
âŒ PRODUCT_PRICE_RANGE - PreÃ§o fora da faixa vÃ¡lida
âŒ PRODUCT_PRICE_DECIMALS - Casas decimais invÃ¡lidas
âŒ PRODUCT_PRICE_EXTREME - Valor extremo detectado
âŒ PRODUCT_PRICE_DRASTIC_CHANGE - MudanÃ§a drÃ¡stica de preÃ§o
âŒ PRODUCT_SKU_LENGTH - Comprimento de SKU invÃ¡lido
âŒ PRODUCT_SKU_FORMAT - Formato de SKU invÃ¡lido
âŒ PRODUCT_SKU_CONSECUTIVE - Caracteres consecutivos
âŒ PRODUCT_SKU_BOUNDARIES - Limites de SKU invÃ¡lidos
âŒ PRODUCT_SKU_PATTERN - PadrÃ£o de SKU invÃ¡lido
âŒ PRODUCT_STOCK_NEGATIVE - Estoque nÃ£o pode ser negativo
âŒ PRODUCT_STOCK_MAXIMUM - Estoque excede mÃ¡ximo
âŒ PRODUCT_STOCK_UNREASONABLE - Quantidade nÃ£o razoÃ¡vel
âŒ PRODUCT_STOCK_DRASTIC_CHANGE - MudanÃ§a drÃ¡stica de estoque

MÃ‰TODOS DE VALIDAÃ‡ÃƒO CUSTOMIZADOS:
---------------------------------

ğŸ”§ BeValidGuid(Guid id)
   - Verifica se o GUID Ã© vÃ¡lido
   - Confirma que nÃ£o Ã© GUID vazio
   - Valida integridade do identificador

ğŸ”§ NotContainOnlyWhitespace(string input)
   - Verifica se nÃ£o contÃ©m apenas espaÃ§os
   - Valida conteÃºdo significativo
   - Previne campos vazios disfarÃ§ados

ğŸ”§ NotContainExcessiveWhitespace(string input)
   - Detecta espaÃ§os duplos ou mÃºltiplos
   - Melhora qualidade dos dados
   - Padroniza formataÃ§Ã£o

ğŸ”§ NotContainRepeatedWords(string name)
   - Detecta palavras duplicadas
   - Melhora qualidade do nome
   - Evita nomes redundantes

ğŸ”§ BeValidProductName(string name)
   - Verifica contra palavras proibidas
   - Valida profissionalismo do nome
   - Bloqueia nomes de teste

ğŸ”§ NotContainDangerousContent(string description)
   - Detecta tentativas de XSS
   - Verifica padrÃµes maliciosos
   - Protege contra injeÃ§Ã£o de cÃ³digo

ğŸ”§ BeValidDescription(string description)
   - Analisa qualidade da descriÃ§Ã£o
   - Detecta conteÃºdo repetitivo
   - Verifica valor informativo

ğŸ”§ HaveValidDecimalPlaces(decimal price)
   - Verifica casas decimais do preÃ§o
   - Garante formataÃ§Ã£o monetÃ¡ria correta
   - Valida precisÃ£o comercial

ğŸ”§ NotBeExtremeValue(decimal price)
   - Detecta preÃ§os suspeitos
   - Verifica valores comercialmente viÃ¡veis
   - Previne erros de digitaÃ§Ã£o

ğŸ”§ NotHaveUnreasonablePriceChange(decimal newPrice)
   - Detecta mudanÃ§as drÃ¡sticas de preÃ§o
   - Pode ser estendido para comparar com preÃ§o atual
   - Previne alteraÃ§Ãµes acidentais

ğŸ”§ NotContainConsecutiveSpecialChars(string input)
   - Detecta caracteres especiais consecutivos
   - Melhora formataÃ§Ã£o de SKU
   - Padroniza cÃ³digos de produto

ğŸ”§ NotStartOrEndWithSpecialChars(string input)
   - Verifica limites de SKU
   - Aplica regras de formataÃ§Ã£o
   - Melhora legibilidade

ğŸ”§ BeValidSkuFormat(string sku)
   - Valida formatos padrÃ£o de SKU
   - Aceita mÃºltiplos padrÃµes comerciais
   - Garante consistÃªncia de cÃ³digos

ğŸ”§ BeReasonableStockQuantity(int quantity)
   - Verifica quantidades razoÃ¡veis para atualizaÃ§Ãµes
   - Limite mais alto que criaÃ§Ã£o (100.000 vs 50.000)
   - Detecta erros de entrada

ğŸ”§ NotHaveUnreasonableStockChange(int newStock)
   - Detecta mudanÃ§as drÃ¡sticas de estoque
   - Pode ser estendido para comparar com estoque atual
   - Previne alteraÃ§Ãµes acidentais

FUNCIONALIDADES DE SEGURANÃ‡A:
-----------------------------
ğŸ”’ ValidaÃ§Ã£o de integridade de ID
ğŸ”’ PrevenÃ§Ã£o de XSS em descriÃ§Ãµes
ğŸ”’ ValidaÃ§Ã£o de entrada de dados
ğŸ”’ SanitizaÃ§Ã£o de campos de texto
ğŸ”’ DetecÃ§Ã£o de mudanÃ§as suspeitas
ğŸ”’ CÃ³digos de erro nÃ£o informativos
ğŸ”’ NormalizaÃ§Ã£o de dados comerciais

CONFIGURAÃ‡ÃƒO INTERNACIONAL:
--------------------------
ğŸŒ Suporte a mensagens em portuguÃªs (pt-BR)
ğŸŒ Suporte a mensagens em inglÃªs (en-US)
ğŸŒ ConfiguraÃ§Ã£o dinÃ¢mica de cultura
ğŸŒ FormataÃ§Ã£o localizada de moeda
ğŸŒ Suporte a caracteres especiais

PADRÃ•ES ARQUITETURAIS:
---------------------
ğŸ—ï¸ Clean Architecture - SeparaÃ§Ã£o clara de responsabilidades
ğŸ—ï¸ DDD (Domain-Driven Design) - ValidaÃ§Ã£o de domÃ­nio
ğŸ—ï¸ SOLID Principles - Single Responsibility
ğŸ—ï¸ Fail-Fast - ValidaÃ§Ã£o em cascata
ğŸ—ï¸ Business Rules - Regras de negÃ³cio especÃ­ficas

INTEGRAÃ‡ÃƒO COM SISTEMA:
----------------------
ğŸ”— MediatR Pipeline - ExecuÃ§Ã£o automÃ¡tica
ğŸ”— ProductsController - ValidaÃ§Ã£o de atualizaÃ§Ã£o
ğŸ”— Exception Middleware - Tratamento de erros
ğŸ”— Logging Behavior - Auditoria de modificaÃ§Ãµes
ğŸ”— Product Repository - VerificaÃ§Ã£o de existÃªncia
ğŸ”— Audit Service - Rastreamento de mudanÃ§as

CENÃRIOS DE TESTE RECOMENDADOS:
------------------------------
âœ… AtualizaÃ§Ã£o vÃ¡lida com dados completos
âœ… ID de produto inexistente
âœ… ID de produto com formato invÃ¡lido
âœ… Nome muito curto ou muito longo
âœ… Nome com caracteres invÃ¡lidos
âœ… DescriÃ§Ã£o muito longa
âœ… DescriÃ§Ã£o com cÃ³digo malicioso
âœ… MudanÃ§a drÃ¡stica de preÃ§o (ex: R$ 100 para R$ 10.000)
âœ… PreÃ§o zero ou negativo
âœ… SKU com formato invÃ¡lido
âœ… MudanÃ§a drÃ¡stica de estoque (ex: 100 para 100.000)
âœ… Estoque negativo
âœ… Caracteres especiais maliciosos
âœ… Tentativas de atualizaÃ§Ã£o nÃ£o autorizada

PERFORMANCE:
-----------
âš¡ ValidaÃ§Ã£o em cascata otimizada
âš¡ Regex compilada para performance
âš¡ VerificaÃ§Ã£o rÃ¡pida de padrÃµes
âš¡ Cache de validaÃ§Ãµes complexas
âš¡ Processamento eficiente de strings
âš¡ ValidaÃ§Ã£o incremental para mudanÃ§as

MANUTENÃ‡ÃƒO:
----------
ğŸ”§ Lista de palavras proibidas atualizÃ¡vel
ğŸ”§ PadrÃµes de SKU configurÃ¡veis
ğŸ”§ Limites de preÃ§o ajustÃ¡veis
ğŸ”§ CÃ³digos de erro personalizÃ¡veis
ğŸ”§ Regras de mudanÃ§as drÃ¡sticas configurÃ¡veis
ğŸ”§ Thresholds de validaÃ§Ã£o editÃ¡veis

CONSIDERAÃ‡Ã•ES DE NEGÃ“CIO:
------------------------
âš ï¸ Validar existÃªncia do produto no banco
âš ï¸ Verificar permissÃµes de atualizaÃ§Ã£o
âš ï¸ Implementar aprovaÃ§Ã£o para mudanÃ§as drÃ¡sticas
âš ï¸ Considerar histÃ³rico de preÃ§os
âš ï¸ Validar impacto em pedidos existentes
âš ï¸ Implementar versionamento de produtos

EXTENSÃ•ES FUTURAS:
-----------------
ğŸ”® ValidaÃ§Ã£o contra preÃ§o atual do banco
ğŸ”® ValidaÃ§Ã£o contra estoque atual do banco
ğŸ”® AprovaÃ§Ã£o workflow para mudanÃ§as grandes
ğŸ”® IntegraÃ§Ã£o com sistema de audit trail
ğŸ”® ValidaÃ§Ã£o de impacto em vendas ativas
ğŸ”® NotificaÃ§Ã£o de mudanÃ§as significativas

EXEMPLO DE USO:
--------------
```csharp
var validator = new UpdateProductCommandValidator();
var command = new UpdateProductCommand(
    Guid.Parse("12345678-1234-1234-1234-123456789012"),
    "Smartphone Galaxy S24 Ultra", 
    "Smartphone Android com 256GB de armazenamento",
    3499.99m,
    "SAMS-2024-002",
    150
);
var result = validator.Validate(command);

if (!result.IsValid)
{
    // Processar erros de validaÃ§Ã£o
    foreach (var error in result.Errors)
    {
        Console.WriteLine($"{error.ErrorCode}: {error.ErrorMessage}");
    }
}
```

VERSIONAMENTO:
-------------
ğŸ“‹ VersÃ£o: 2.0.0
ğŸ“‹ Ãšltima AtualizaÃ§Ã£o: 2024
ğŸ“‹ Compatibilidade: .NET 8+
ğŸ“‹ Status: ProduÃ§Ã£o

AUTOR & RESPONSÃVEL:
-------------------
ğŸ‘¨â€ğŸ’» Desenvolvido por: Equipe AuthTenant
ğŸ‘¨â€ğŸ’» Mantido por: Time de Produtos
ğŸ“§ Contato: products@AuthTenant.com

=========================================================
