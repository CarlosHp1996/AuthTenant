=========================================================
TENANT.CS - DOCUMENTAÃ‡ÃƒO TÃ‰CNICA
=========================================================

VISÃƒO GERAL:
-----------
Entidade central do sistema multi-tenant representando inquilinos/organizaÃ§Ãµes.
Implementa gestÃ£o completa de tenants com configuraÃ§Ãµes, assinaturas e recursos.
Controla isolamento de dados, permissÃµes e limites por organizaÃ§Ã£o.

LOCALIZAÃ‡ÃƒO:
-----------
ğŸ“ AuthTenant.Domain/Entities/Tenant.cs

DEPENDÃŠNCIAS:
------------
âœ… BaseEntity - HeranÃ§a de funcionalidades base
âœ… System.ComponentModel.DataAnnotations - ValidaÃ§Ãµes de dados
âœ… System.ComponentModel.DataAnnotations.Schema - Mapeamento de banco
âœ… BusinessRuleException - ExceÃ§Ãµes de regras de negÃ³cio
âœ… ApplicationUser - NavegaÃ§Ã£o para usuÃ¡rios

RESPONSABILIDADES:
-----------------
ğŸ”¸ GestÃ£o completa de inquilinos e organizaÃ§Ãµes
ğŸ”¸ Controle de configuraÃ§Ãµes e limites por tenant
ğŸ”¸ Gerenciamento de assinaturas e billing
ğŸ”¸ Isolamento e seguranÃ§a de dados
ğŸ”¸ CustomizaÃ§Ã£o de interface e branding
ğŸ”¸ Analytics e mÃ©tricas por organizaÃ§Ã£o

PROPRIEDADES PRINCIPAIS:
-----------------------

1. INFORMAÃ‡Ã•ES BÃSICAS:
   âœ… Name (string) - Nome da organizaÃ§Ã£o (obrigatÃ³rio)
   âœ… DisplayName (string?) - Nome de exibiÃ§Ã£o customizado
   âœ… Description (string?) - DescriÃ§Ã£o da organizaÃ§Ã£o
   âœ… Website (string?) - Site oficial da organizaÃ§Ã£o
   âœ… ValidaÃ§Ã£o de formato e comprimento

2. CONFIGURAÃ‡Ã•ES DE ASSINATURA:
   âœ… SubscriptionPlan (string) - Plano de assinatura atual
   âœ… SubscriptionStatus (string) - Status da assinatura
   âœ… SubscriptionStartDate (DateTime?) - InÃ­cio da assinatura
   âœ… SubscriptionEndDate (DateTime?) - Fim da assinatura
   âœ… BillingEmail (string?) - Email para cobranÃ§a
   âœ… Controle de acesso baseado em plano

3. LIMITES E RECURSOS:
   âœ… MaxUsers (int) - Limite mÃ¡ximo de usuÃ¡rios
   âœ… MaxStorage (long) - Limite de armazenamento (bytes)
   âœ… MaxProducts (int) - Limite de produtos no catÃ¡logo
   âœ… MaxApiCalls (int) - Limite de chamadas API por perÃ­odo
   âœ… Controle de usage e billing

4. USAGE E ANALYTICS:
   âœ… CurrentUsers (int) - UsuÃ¡rios ativos atuais
   âœ… CurrentStorage (long) - Armazenamento usado (bytes)
   âœ… CurrentProducts (int) - Produtos cadastrados
   âœ… CurrentApiCalls (int) - Chamadas API no perÃ­odo
   âœ… MÃ©tricas em tempo real

5. CUSTOMIZAÃ‡ÃƒO E BRANDING:
   âœ… LogoUrl (string?) - URL do logo da organizaÃ§Ã£o
   âœ… PrimaryColor (string?) - Cor primÃ¡ria do tema
   âœ… SecondaryColor (string?) - Cor secundÃ¡ria do tema
   âœ… CustomDomain (string?) - DomÃ­nio personalizado
   âœ… PersonalizaÃ§Ã£o de interface

6. CONFIGURAÃ‡Ã•ES REGIONAIS:
   âœ… TimeZone (string?) - Fuso horÃ¡rio padrÃ£o
   âœ… Language (string?) - Idioma padrÃ£o
   âœ… Currency (string?) - Moeda para billing
   âœ… DateFormat (string?) - Formato de data preferido
   âœ… LocalizaÃ§Ã£o por regiÃ£o

7. CONFIGURAÃ‡Ã•ES TÃ‰CNICAS:
   âœ… DatabaseConnectionString (string?) - String de conexÃ£o especÃ­fica
   âœ… ApiKey (string?) - Chave API Ãºnica do tenant
   âœ… EncryptionKey (string?) - Chave de criptografia
   âœ… CustomSettings (string?) - ConfiguraÃ§Ãµes JSON personalizadas
   âœ… Isolamento e seguranÃ§a

PROPRIEDADES COMPUTADAS:
------------------------

ğŸ”§ EffectiveDisplayName
   - Nome de exibiÃ§Ã£o com fallback para Name
   - Garantia de valor nÃ£o-nulo para interfaces
   - PriorizaÃ§Ã£o de DisplayName customizado

ğŸ”§ IsSubscriptionActive
   - Status ativo considerando data de expiraÃ§Ã£o
   - ValidaÃ§Ã£o de perÃ­odo de assinatura
   - Base para controle de acesso

ğŸ”§ IsTrialPeriod
   - Identifica se estÃ¡ em perÃ­odo trial
   - Baseado em plano e datas de assinatura
   - Controle de funcionalidades limitadas

ğŸ”§ SubscriptionDaysRemaining
   - Dias restantes da assinatura
   - Alertas de renovaÃ§Ã£o antecipada
   - Null se assinatura sem data de fim

ğŸ”§ IsNearLimit (Users, Storage, Products, ApiCalls)
   - Alertas de aproximaÃ§Ã£o de limites
   - Threshold configurÃ¡vel (80% por padrÃ£o)
   - PrevenÃ§Ã£o de bloqueios inesperados

ğŸ”§ UsagePercentage (Users, Storage, Products, ApiCalls)
   - Percentual de uso de cada recurso
   - MÃ©tricas para dashboards
   - Base para billing e alerts

ğŸ”§ Status
   - Status geral do tenant considerando mÃºltiplos fatores
   - Estados: Active, Inactive, Suspended, Trial, Expired
   - LÃ³gica centralizada de acesso

MÃ‰TODOS DE DOMÃNIO - GESTÃƒO DE TENANT:
-------------------------------------

ğŸ”§ Activate(string? activatedBy)
   - AtivaÃ§Ã£o de tenant com validaÃ§Ãµes
   - VerificaÃ§Ã£o de configuraÃ§Ãµes obrigatÃ³rias
   - InicializaÃ§Ã£o de recursos padrÃ£o
   - Auditoria de ativaÃ§Ã£o

ğŸ”§ Deactivate(string? deactivatedBy)
   - DesativaÃ§Ã£o controlada de tenant
   - PreservaÃ§Ã£o de dados para auditoria
   - NotificaÃ§Ã£o para usuÃ¡rios ativos
   - SuspensÃ£o de serviÃ§os

ğŸ”§ MarkAsDeleted(string? deletedBy)
   - Soft delete com retenÃ§Ã£o de dados
   - InvalidaÃ§Ã£o imediata de acessos
   - Processo de cleanup agendado
   - Compliance com polÃ­ticas de retenÃ§Ã£o

MÃ‰TODOS DE DOMÃNIO - ASSINATURA:
-------------------------------

ğŸ”§ UpdateSubscription(string plan, DateTime? startDate, DateTime? endDate, string? updatedBy)
   - AtualizaÃ§Ã£o de plano de assinatura
   - ValidaÃ§Ã£o de transiÃ§Ãµes permitidas
   - AplicaÃ§Ã£o de novos limites
   - Registro de mudanÃ§a para billing

ğŸ”§ RenewSubscription(DateTime newEndDate, string? renewedBy)
   - RenovaÃ§Ã£o de assinatura existente
   - ManutenÃ§Ã£o de configuraÃ§Ãµes atuais
   - Reset de contadores de uso
   - NotificaÃ§Ã£o de renovaÃ§Ã£o

ğŸ”§ SuspendSubscription(string reason, string? suspendedBy)
   - SuspensÃ£o temporÃ¡ria por nÃ£o-pagamento
   - ManutenÃ§Ã£o de dados com acesso limitado
   - Processo de cobranÃ§a e recuperaÃ§Ã£o
   - Auditoria de suspensÃ£o

MÃ‰TODOS DE DOMÃNIO - RECURSOS:
-----------------------------

ğŸ”§ UpdateLimits(int? maxUsers, long? maxStorage, int? maxProducts, int? maxApiCalls, string? updatedBy)
   - AtualizaÃ§Ã£o de limites de recursos
   - ValidaÃ§Ã£o contra uso atual
   - NotificaÃ§Ã£o de mudanÃ§as aos usuÃ¡rios
   - AplicaÃ§Ã£o imediata de controles

ğŸ”§ UpdateStorageUsage(long newUsage, string? updatedBy)
   - AtualizaÃ§Ã£o de uso de armazenamento
   - ValidaÃ§Ã£o contra limites configurados
   - Alertas de aproximaÃ§Ã£o de limite
   - MÃ©tricas para billing

ğŸ”§ IncrementApiCalls(int count = 1)
   - Incremento de contador de API calls
   - ValidaÃ§Ã£o contra limites do plano
   - Rate limiting e throttling
   - MÃ©tricas de uso em tempo real

ğŸ”§ ResetUsageCounters(string? resetBy)
   - Reset de contadores para novo perÃ­odo
   - ManutenÃ§Ã£o de histÃ³rico para analytics
   - AplicaÃ§Ã£o de novos limites
   - Processo automatizado mensal

MÃ‰TODOS DE DOMÃNIO - CUSTOMIZAÃ‡ÃƒO:
---------------------------------

ğŸ”§ UpdateBranding(string? logoUrl, string? primaryColor, string? secondaryColor, string? updatedBy)
   - AtualizaÃ§Ã£o de identidade visual
   - ValidaÃ§Ã£o de URLs e cores
   - AplicaÃ§Ã£o imediata em interfaces
   - Cache invalidation para performance

ğŸ”§ UpdateLocalization(string? timeZone, string? language, string? currency, string? dateFormat, string? updatedBy)
   - ConfiguraÃ§Ã£o de localizaÃ§Ã£o
   - ValidaÃ§Ã£o de valores permitidos
   - AplicaÃ§Ã£o para novos usuÃ¡rios
   - MigraÃ§Ã£o de dados existentes

ğŸ”§ UpdateCustomSettings(string? settings, string? updatedBy)
   - ConfiguraÃ§Ãµes personalizadas em JSON
   - ValidaÃ§Ã£o de formato e estrutura
   - AplicaÃ§Ã£o de configuraÃ§Ãµes especÃ­ficas
   - Extensibilidade para funcionalidades

VALIDAÃ‡Ã•ES DE NEGÃ“CIO:
---------------------

1. INFORMAÃ‡Ã•ES BÃSICAS:
   âŒ Name obrigatÃ³rio, 2-100 caracteres
   âŒ Apenas letras, nÃºmeros, espaÃ§os e caracteres comerciais
   âŒ DisplayName 2-100 caracteres se fornecido
   âŒ Website deve ser URL vÃ¡lida se fornecida

2. ASSINATURA:
   âŒ SubscriptionPlan deve ser valor vÃ¡lido
   âŒ SubscriptionStatus deve ser enum vÃ¡lido
   âŒ EndDate deve ser posterior a StartDate
   âŒ BillingEmail deve ser email vÃ¡lido

3. LIMITES:
   âŒ Todos os limites devem ser positivos
   âŒ Limites razoÃ¡veis para prevenir abuse
   âŒ Uso atual nÃ£o pode exceder limites
   âŒ ConsistÃªncia entre limites relacionados

4. BRANDING:
   âŒ URLs devem ser vÃ¡lidas e acessÃ­veis
   âŒ Cores devem ser hexadecimais vÃ¡lidas
   âŒ CustomDomain deve ser domÃ­nio vÃ¡lido
   âŒ Logos dentro de limites de tamanho

5. CONFIGURAÃ‡Ã•ES:
   âŒ TimeZone deve ser vÃ¡lido (IANA format)
   âŒ Language deve seguir ISO 639-1
   âŒ Currency deve ser cÃ³digo ISO 4217
   âŒ CustomSettings deve ser JSON vÃ¡lido

CONSTANTES DE VALIDAÃ‡ÃƒO:
-----------------------
ğŸ“Š MIN_NAME_LENGTH = 2 caracteres
ğŸ“Š MAX_NAME_LENGTH = 100 caracteres
ğŸ“Š MAX_DESCRIPTION_LENGTH = 500 caracteres
ğŸ“Š MAX_URL_LENGTH = 500 caracteres
ğŸ“Š MAX_COLOR_LENGTH = 7 caracteres (#RRGGBB)
ğŸ“Š MAX_CUSTOM_SETTINGS_LENGTH = 10000 caracteres
ğŸ“Š DEFAULT_MAX_USERS = 10
ğŸ“Š DEFAULT_MAX_STORAGE = 1GB (bytes)
ğŸ“Š DEFAULT_MAX_PRODUCTS = 1000
ğŸ“Š DEFAULT_MAX_API_CALLS = 10000

FUNCIONALIDADES DE SEGURANÃ‡A:
-----------------------------
ğŸ”’ Isolamento completo de dados por tenant
ğŸ”’ Chaves de criptografia Ãºnicas por tenant
ğŸ”’ ValidaÃ§Ã£o de acesso baseada em tenant
ğŸ”’ Auditoria de todas as mudanÃ§as crÃ­ticas
ğŸ”’ Rate limiting por tenant
ğŸ”’ Backup e recovery isolados

PADRÃ•ES ARQUITETURAIS:
---------------------
ğŸ—ï¸ Multi-Tenant Pattern - Isolamento de dados
ğŸ—ï¸ Configuration Pattern - ConfiguraÃ§Ãµes flexÃ­veis
ğŸ—ï¸ Strategy Pattern - Diferentes tipos de tenant
ğŸ—ï¸ Factory Pattern - CriaÃ§Ã£o de recursos
ğŸ—ï¸ Observer Pattern - NotificaÃ§Ãµes de mudanÃ§as
ğŸ—ï¸ Template Method - ValidaÃ§Ãµes customizÃ¡veis

INTEGRAÃ‡ÃƒO COM SISTEMA:
----------------------
ğŸ”— Tenant Resolver - IdentificaÃ§Ã£o de tenant por request
ğŸ”— Database Context - Isolamento de dados
ğŸ”— Billing Service - CobranÃ§a e pagamentos
ğŸ”— Storage Service - Armazenamento isolado
ğŸ”— Email Service - ComunicaÃ§Ã£o com tenant
ğŸ”— Analytics Service - MÃ©tricas por tenant

CENÃRIOS DE USO:
---------------
âœ… Onboarding de novos clientes
âœ… GestÃ£o de assinaturas e billing
âœ… Controle de limites e recursos
âœ… CustomizaÃ§Ã£o de interface
âœ… ConfiguraÃ§Ã£o regional
âœ… Monitoramento de uso
âœ… Suporte tÃ©cnico e diagnÃ³stico

PERFORMANCE:
-----------
âš¡ Cache de configuraÃ§Ãµes por tenant
âš¡ Lazy loading de propriedades complexas
âš¡ IndexaÃ§Ã£o otimizada para consultas
âš¡ Particionamento de dados grandes
âš¡ CompressÃ£o de dados histÃ³ricos

MANUTENÃ‡ÃƒO:
----------
ğŸ”§ ConfiguraÃ§Ãµes via JSON para flexibilidade
ğŸ”§ MigraÃ§Ã£o de dados simplificada
ğŸ”§ Monitoring automÃ¡tico de saÃºde
ğŸ”§ Backup automÃ¡tico por tenant
ğŸ”§ Logs estruturados para debugging

CONSIDERAÃ‡Ã•ES DE COMPLIANCE:
---------------------------
âš ï¸ LGPD/GDPR - LocalizaÃ§Ã£o de dados
âš ï¸ SOC2 - Controles de seguranÃ§a
âš ï¸ ISO 27001 - GestÃ£o de informaÃ§Ãµes
âš ï¸ Data Residency - Armazenamento regional
âš ï¸ Audit Logs - Rastreabilidade completa
âš ï¸ Encryption - Dados em repouso e trÃ¢nsito

EXEMPLO DE USO:
--------------
```csharp
// CriaÃ§Ã£o de tenant
var tenant = new Tenant(
    "Empresa XYZ Ltda", 
    "Basic", 
    "admin-user"
);

// ConfiguraÃ§Ã£o inicial
tenant.UpdateSubscription("Premium", 
    DateTime.Now, DateTime.Now.AddYears(1), "sales");
tenant.UpdateLimits(100, 10_000_000_000, 5000, 100000, "admin");

// CustomizaÃ§Ã£o
tenant.UpdateBranding(
    "https://cdn.empresa.com/logo.png",
    "#1E3A8A", "#F59E0B", "admin");
tenant.UpdateLocalization(
    "America/Sao_Paulo", "pt-BR", "BRL", "dd/MM/yyyy", "admin");

// Monitoramento
tenant.UpdateStorageUsage(5_000_000_000, "system"); // 5GB
tenant.IncrementApiCalls(100);

// Analytics
var storagePercent = tenant.StorageUsagePercentage;
var isNearLimit = tenant.IsNearUserLimit;
var daysRemaining = tenant.SubscriptionDaysRemaining;
var status = tenant.Status;

// ValidaÃ§Ãµes
var canAddUser = tenant.CurrentUsers < tenant.MaxUsers;
var hasActiveSubscription = tenant.IsSubscriptionActive;
```

EVENTOS DE DOMÃNIO (FUTURO):
---------------------------
ğŸ”® TenantCreated - Novo tenant criado
ğŸ”® TenantActivated - Tenant ativado
ğŸ”® SubscriptionUpdated - Assinatura alterada
ğŸ”® LimitsExceeded - Limites ultrapassados
ğŸ”® TenantSuspended - Tenant suspenso
ğŸ”® BrandingUpdated - Identidade visual alterada

MÃ‰TRICAS E ANALYTICS:
--------------------
ğŸ“Š Taxa de conversÃ£o trial â†’ paid
ğŸ“Š Churn rate por plano
ğŸ“Š Uso mÃ©dio de recursos por plano
ğŸ“Š Tempo de onboarding
ğŸ“Š SatisfaÃ§Ã£o por tenant
ğŸ“Š Revenue per tenant

EXTENSÃ•ES FUTURAS:
-----------------
ğŸ”® Multi-Region Support - Tenants distribuÃ­dos
ğŸ”® Advanced Analytics - BI integrado
ğŸ”® Marketplace - Apps de terceiros
ğŸ”® White-label - Branding completo
ğŸ”® Federation - SSO avanÃ§ado
ğŸ”® Compliance Dashboard - Controles automÃ¡ticos

VERSIONAMENTO:
-------------
ğŸ“‹ VersÃ£o: 2.0.0
ğŸ“‹ Ãšltima AtualizaÃ§Ã£o: 2024
ğŸ“‹ Compatibilidade: .NET 8+
ğŸ“‹ Status: ProduÃ§Ã£o

AUTOR & RESPONSÃVEL:
-------------------
ğŸ‘¨â€ğŸ’» Desenvolvido por: Equipe AuthTenant
ğŸ‘¨â€ğŸ’» Mantido por: Time de Platform
ğŸ“§ Contato: platform@AuthTenant.com

=========================================================
