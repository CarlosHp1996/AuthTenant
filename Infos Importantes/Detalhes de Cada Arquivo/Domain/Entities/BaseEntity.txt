=========================================================
BASEENTITY.CS - DOCUMENTAÃ‡ÃƒO TÃ‰CNICA
=========================================================

VISÃƒO GERAL:
-----------
Classe base abstrata que fornece propriedades e funcionalidades comuns para todas as entidades do domÃ­nio.
Implementa padrÃµes fundamentais como multi-tenancy, auditoria, soft delete e igualdade.
Segue princÃ­pios de DDD e Clean Architecture com encapsulamento de regras de negÃ³cio.

LOCALIZAÃ‡ÃƒO:
-----------
ğŸ“ AuthTenant.Domain/Entities/BaseEntity.cs

DEPENDÃŠNCIAS:
------------
âœ… AuthTenant.Domain.Interfaces.ITenantEntity - Interface para multi-tenancy
âœ… AuthTenant.Domain.Interfaces.IAuditableEntity - Interface para auditoria
âœ… System.ComponentModel.DataAnnotations - ValidaÃ§Ãµes de dados
âœ… System.IEquatable<BaseEntity> - ImplementaÃ§Ã£o de igualdade

RESPONSABILIDADES:
-----------------
ğŸ”¸ Fornecer identificaÃ§Ã£o Ãºnica para todas as entidades
ğŸ”¸ Implementar isolamento multi-tenant
ğŸ”¸ Prover funcionalidades de auditoria automÃ¡tica
ğŸ”¸ Implementar soft delete para preservaÃ§Ã£o de dados
ğŸ”¸ Garantir comparaÃ§Ã£o consistente entre entidades
ğŸ”¸ Aplicar validaÃ§Ãµes bÃ¡sicas de integridade

PROPRIEDADES IMPLEMENTADAS:
--------------------------

1. IDENTIFICAÃ‡ÃƒO E TENANT:
   âœ… Id (Guid) - Identificador Ãºnico protegido
   âœ… TenantId (string) - Isolamento multi-tenant obrigatÃ³rio
   âœ… ValidaÃ§Ã£o de GUID nÃ£o vazio
   âœ… ValidaÃ§Ã£o de TenantId obrigatÃ³rio

2. AUDITORIA AUTOMÃTICA:
   âœ… CreatedAt (DateTime) - Timestamp de criaÃ§Ã£o UTC
   âœ… CreatedBy (string?) - UsuÃ¡rio que criou a entidade
   âœ… UpdatedAt (DateTime?) - Timestamp da Ãºltima atualizaÃ§Ã£o
   âœ… UpdatedBy (string?) - UsuÃ¡rio que fez a Ãºltima atualizaÃ§Ã£o

3. SOFT DELETE:
   âœ… IsDeleted (bool) - Flag de exclusÃ£o lÃ³gica protegida
   âœ… DeletedAt (DateTime?) - Timestamp da exclusÃ£o
   âœ… DeletedBy (string?) - UsuÃ¡rio que executou a exclusÃ£o
   âœ… PreservaÃ§Ã£o de integridade referencial

MÃ‰TODOS DE DOMÃNIO:
------------------

ğŸ”§ MarkAsUpdated(string? updatedBy)
   - Atualiza timestamp e usuÃ¡rio de modificaÃ§Ã£o
   - Chamado automaticamente em operaÃ§Ãµes de negÃ³cio
   - Suporte a auditoria de mudanÃ§as

ğŸ”§ MarkAsDeleted(string? deletedBy)
   - Implementa soft delete com metadados
   - Previne exclusÃ£o dupla
   - Atualiza campos de auditoria

ğŸ”§ Restore(string? restoredBy)
   - Restaura entidade excluÃ­da logicamente
   - Limpa metadados de exclusÃ£o
   - MantÃ©m histÃ³rico de auditoria

ğŸ”§ BelongsToTenant(string tenantId)
   - ValidaÃ§Ã£o crÃ­tica de seguranÃ§a multi-tenant
   - ComparaÃ§Ã£o case-insensitive
   - ExceÃ§Ã£o para tenant ID invÃ¡lido

ğŸ”§ IsValid()
   - ValidaÃ§Ã£o de estado da entidade
   - Regras de negÃ³cio fundamentais
   - ExtensÃ­vel em classes derivadas

ğŸ”§ GetAge()
   - Calcula idade da entidade
   - Ãštil para analytics e lifecycle
   - Baseado em UTC

ğŸ”§ GetTimeSinceLastUpdate()
   - Tempo desde Ãºltima modificaÃ§Ã£o
   - Suporte a monitoramento de atividade
   - Null se nunca foi atualizada

IMPLEMENTAÃ‡ÃƒO DE IGUALDADE:
--------------------------

ğŸ”§ Equals(BaseEntity? other)
   - ComparaÃ§Ã£o por Id e TenantId
   - VerificaÃ§Ã£o de tipo consistente
   - Suporte a heranÃ§a

ğŸ”§ GetHashCode()
   - Hash code baseado em Id e TenantId
   - Consistente com Equals
   - Otimizado para coleÃ§Ãµes

ğŸ”§ Operadores == e !=
   - Sobrecarga para comparaÃ§Ã£o natural
   - Suporte a comparaÃ§Ãµes null
   - Comportamento consistente

FUNCIONALIDADES DE SEGURANÃ‡A:
-----------------------------
ğŸ”’ ProteÃ§Ã£o de propriedades crÃ­ticas (Id, CreatedAt, IsDeleted)
ğŸ”’ ValidaÃ§Ã£o obrigatÃ³ria de TenantId
ğŸ”’ VerificaÃ§Ã£o de pertencimento a tenant
ğŸ”’ Auditoria automÃ¡tica de mudanÃ§as
ğŸ”’ Soft delete para preservaÃ§Ã£o de dados
ğŸ”’ ValidaÃ§Ã£o de estado da entidade

PADRÃ•ES ARQUITETURAIS:
---------------------
ğŸ—ï¸ DDD - Entidade de domÃ­nio rica com comportamentos
ğŸ—ï¸ Multi-Tenancy - Isolamento seguro de dados
ğŸ—ï¸ Audit Trail - Rastreamento automÃ¡tico de mudanÃ§as
ğŸ—ï¸ Soft Delete - PreservaÃ§Ã£o de integridade referencial
ğŸ—ï¸ Value Equality - ComparaÃ§Ã£o semÃ¢ntica consistente
ğŸ—ï¸ Fail-Fast - ValidaÃ§Ã£o imediata de regras

INTEGRAÃ‡ÃƒO COM SISTEMA:
----------------------
ğŸ”— Entity Framework - Mapeamento ORM automÃ¡tico
ğŸ”— ASP.NET Core Identity - IntegraÃ§Ã£o com sistema de usuÃ¡rios
ğŸ”— Multi-tenant Middleware - Isolamento automÃ¡tico
ğŸ”— Audit Interceptor - Captura automÃ¡tica de mudanÃ§as
ğŸ”— Soft Delete Filter - ExclusÃ£o automÃ¡tica de deletados

CENÃRIOS DE USO:
---------------
âœ… CriaÃ§Ã£o de novas entidades de domÃ­nio
âœ… Auditoria automÃ¡tica de mudanÃ§as
âœ… ExclusÃ£o lÃ³gica preservando referÃªncias
âœ… RestauraÃ§Ã£o de dados excluÃ­dos
âœ… ValidaÃ§Ã£o de acesso multi-tenant
âœ… ComparaÃ§Ã£o e ordenaÃ§Ã£o de entidades
âœ… Tracking de lifecycle de entidades

VALIDAÃ‡Ã•ES IMPLEMENTADAS:
------------------------
âŒ Id nÃ£o pode ser Guid.Empty
âŒ TenantId nÃ£o pode ser null ou vazio
âŒ CreatedAt deve ser <= DateTime.UtcNow
âŒ ValidaÃ§Ã£o de estado consistente
âŒ ProteÃ§Ã£o contra soft delete duplo
âŒ ValidaÃ§Ã£o de tenant em operaÃ§Ãµes crÃ­ticas

PERFORMANCE:
-----------
âš¡ Propriedades protegidas minimizam mutaÃ§Ãµes desnecessÃ¡rias
âš¡ GetHashCode otimizado para coleÃ§Ãµes
âš¡ ComparaÃ§Ãµes otimizadas com early returns
âš¡ ValidaÃ§Ãµes eficientes com short-circuit
âš¡ UTC timestamps para consistency global

MANUTENÃ‡ÃƒO:
----------
ğŸ”§ ValidaÃ§Ãµes extensÃ­veis via override
ğŸ”§ Metadados de auditoria configurÃ¡veis
ğŸ”§ Comportamentos customizÃ¡veis em classes derivadas
ğŸ”§ Logs estruturados via ToString()
ğŸ”§ EvoluÃ§Ã£o compatÃ­vel de propriedades

CONSIDERAÃ‡Ã•ES DE DESIGN:
-----------------------
âš ï¸ Todas as entidades devem herdar desta classe
âš ï¸ TenantId deve ser sempre validado em operaÃ§Ãµes
âš ï¸ Soft delete deve ser respeitado em queries
âš ï¸ Auditoria deve ser preservada em migraÃ§Ãµes
âš ï¸ ComparaÃ§Ãµes devem considerar tanto Id quanto TenantId

EXEMPLO DE USO:
--------------
```csharp
// CriaÃ§Ã£o de entidade derivada
public class Product : BaseEntity
{
    private string _name;
    
    public string Name 
    { 
        get => _name; 
        set 
        { 
            _name = value; 
            MarkAsUpdated("user123"); 
        } 
    }
}

// Uso de funcionalidades base
var product = new Product { TenantId = "tenant1" };
var isValid = product.IsValid(); // true
var belongsToTenant = product.BelongsToTenant("tenant1"); // true

// Soft delete
product.MarkAsDeleted("admin");
var isDeleted = product.IsDeleted; // true

// ComparaÃ§Ã£o
var product2 = new Product { TenantId = "tenant1" };
var areEqual = product.Equals(product2); // true se mesmo Id
```

EXTENSÃ•ES RECOMENDADAS:
----------------------
ğŸ”® Domain Events - NotificaÃ§Ãµes de mudanÃ§as de estado
ğŸ”® Versioning - Controle de versÃ£o de entidades
ğŸ”® Encryption - Criptografia de campos sensÃ­veis
ğŸ”® Compression - CompressÃ£o de dados para storage
ğŸ”® Caching - Cache de entidades frequentemente acessadas
ğŸ”® Validation Attributes - ValidaÃ§Ãµes declarativas adicionais

VERSIONAMENTO:
-------------
ğŸ“‹ VersÃ£o: 2.0.0
ğŸ“‹ Ãšltima AtualizaÃ§Ã£o: 2024
ğŸ“‹ Compatibilidade: .NET 8+
ğŸ“‹ Status: ProduÃ§Ã£o

AUTOR & RESPONSÃVEL:
-------------------
ğŸ‘¨â€ğŸ’» Desenvolvido por: Equipe AuthTenant
ğŸ‘¨â€ğŸ’» Mantido por: Time de Arquitetura
ğŸ“§ Contato: architecture@AuthTenant.com

=========================================================
